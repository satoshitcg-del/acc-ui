import { expect, test, describe } from "vitest";

// ฟังก์ชันทดสอบง่ายๆ
function บวกเลข(ก: number, ข: number): number {
  return ก + ข;
}

function ตรวจสอบอีเมล(อีเมล: string): boolean {
  return อีเมล.includes("@") && อีเมล.includes(".");
}

function สร้างรายการ(จำนวน: number): string[] {
  return Array.from({ length: จำนวน }, (_, i) => `รายการที่ ${i + 1}`);
}

describe("เทสเคสพื้นฐาน - ระบบบัญชี", () => {
  test("ควรบวกเลขได้ถูกต้อง", () => {
    expect(บวกเลข(2, 3)).toBe(5);
    expect(บวกเลข(10, 20)).toBe(30);
    expect(บวกเลข(-5, 5)).toBe(0);
  });

  test("ควรตรวจสอบอีเมลได้", () => {
    expect(ตรวจสอบอีเมล("test@example.com")).toBe(true);
    expect(ตรวจสอบอีเมล("user@domain.co.th")).toBe(true);
    expect(ตรวจสอบอีเมล("invalid-email")).toBe(false);
    expect(ตรวจสอบอีเมล("")).toBe(false);
  });

  test("ควรสร้างรายการได้", () => {
    const รายการ3 = สร้างรายการ(3);
    expect(รายการ3).toHaveLength(3);
    expect(รายการ3[0]).toBe("รายการที่ 1");
    expect(รายการ3[2]).toBe("รายการที่ 3");
  });

  test("ควรจัดการข้อมูลลูกค้าได้", () => {
    const ข้อมูลลูกค้า = {
      รหัส: "C001",
      ชื่อ: "บริษัท ตัวอย่าง จำกัด",
      อีเมล: "info@example.com",
      เบอร์โทร: "02-123-4567"
    };

    expect(ข้อมูลลูกค้า.รหัส).toBe("C001");
    expect(ข้อมูลลูกค้า.ชื่อ).toContain("บริษัท");
    expect(ตรวจสอบอีเมล(ข้อมูลลูกค้า.อีเมล)).toBe(true);
  });

  test("ควรคำนวณยอดรวมได้", () => {
    const รายการสินค้า = [
      { ชื่อ: "สินค้า A", ราคา: 100, จำนวน: 2 },
      { ชื่อ: "สินค้า B", ราคา: 200, จำนวน: 1 },
      { ชื่อ: "สินค้า C", ราคา: 50, จำนวน: 3 }
    ];

    const ยอดรวม = รายการสินค้า.reduce((รวม, สินค้า) => {
      return รวม + (สินค้า.ราคา * สินค้า.จำนวน);
    }, 0);

    expect(ยอดรวม).toBe(550); // (100*2) + (200*1) + (50*3) = 200 + 200 + 150 = 550
  });

  test("ควรจัดการสถานะการชำระเงินได้", () => {
    const สถานะการชำระ = {
      รหัสบิล: "INV-001",
      ยอดเงิน: 1000,
      สถานะ: "รอดำเนินการ",
      วันที่สร้าง: "2024-01-15"
    };

    expect(สถานะการชำระ.สถานะ).toBe("รอดำเนินการ");
    expect(สถานะการชำระ.ยอดเงิน).toBeGreaterThan(0);
    expect(สถานะการชำระ.รหัสบิล).toMatch(/^INV-/);
  });

  test("ควรกรองข้อมูลได้", () => {
    const รายการลูกค้า = [
      { ชื่อ: "บริษัท A", เมือง: "กรุงเทพ" },
      { ชื่อ: "บริษัท B", เมือง: "เชียงใหม่" },
      { ชื่อ: "บริษัท C", เมือง: "กรุงเทพ" },
      { ชื่อ: "บริษัท D", เมือง: "ภูเก็ต" }
    ];

    const ลูกค้ากรุงเทพ = รายการลูกค้า.filter(ลูกค้า => ลูกค้า.เมือง === "กรุงเทพ");
    expect(ลูกค้ากรุงเทพ).toHaveLength(2);
    expect(ลูกค้ากรุงเทพ[0].ชื่อ).toBe("บริษัท A");
  });
});